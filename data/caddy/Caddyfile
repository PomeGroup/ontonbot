{
    admin :2019
    log {
        output stdout
        format json
    }
    servers {
        metrics
    }
}

app.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy /ptma* participant-tma:3000
    reverse_proxy mini-app:3000
}

metabase.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy metabase:3000
}

toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
       format json
    }
    reverse_proxy /ptma* participant-tma:3000
    reverse_proxy mini-app:3000
}

storage.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy minio:9000
}

storage-admin.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy minio:9001
}

monitoring.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy grafana:3000
}

adminer.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy adminer:8080
}

client-web.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    log {
        output stdout
        format json
    }
    reverse_proxy client-web:3000
}

web.toncloud.observer {
    tls /certs/fullchain.pem /certs/privkey.pem {
        protocols tls1.2 tls1.3
    }
    reverse_proxy website:3000
}
