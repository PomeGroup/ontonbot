<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<match docker.**>
  @type elasticsearch
  host elasticsearch
  port 9200
  scheme http
  logstash_format false
  include_tag_key true
  tag_key @tag
  index_name ${tag}-%Y%m%d
  verify_es_version_at_startup true
  suppress_type_name true
  time_key @timestamp
  time_key_format %Y-%m-%dT%H:%M:%S.%NZ
  include_timestamp true
  reconnect_on_error true
  reload_on_failure true
  reload_connections false

  <buffer tag,time>
    @type file
    path /fluentd/log/buffer
    timekey 86400
    timekey_wait 10m
    timekey_use_utc true
    flush_mode interval
    flush_interval 60s
    retry_forever false
    retry_max_times 10
  </buffer>
</match>

